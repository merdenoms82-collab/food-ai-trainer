<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>DarsNest | AI Kitchen OS</title>
    
    <!-- PWA Configuration -->
    <meta name="theme-color" content="#22c55e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="DarsNest">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç≥</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Liquid Background -->
    <div class="liquid-background">
        <div class="liquid-blob blob-1"></div>
        <div class="liquid-blob blob-2"></div>
    </div>
    
    <!-- App Shell -->
    <div class="app-shell">
        <!-- Safe Area Top -->
        <div class="safe-area-top"></div>
        
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="logo-text">DarsNest AI</div>
            </div>
            
            <div class="header-actions">
                <button class="header-btn" id="notificationBtn">
                    <i class="fas fa-bell"></i>
                </button>
                <button class="header-btn" id="installBtn" style="display: none;">
                    <i class="fas fa-download"></i>
                </button>
            </div>
        </header>
        
        <!-- Chef Maya Welcome Modal -->
        <div class="welcome-modal" id="welcomeModal">
            <div class="welcome-content">
                <div class="chef-avatar">
                    <div class="avatar-icon">üë©‚Äçüç≥</div>
                    <div class="avatar-badge">
                        <i class="fas fa-sparkles"></i>
                    </div>
                </div>
                <div class="welcome-text">
                    <h2>Hi there! I'm Chef Maya</h2>
                    <p>Let's add some staples to your pantry first, then I'll help you cook smarter!</p>
                </div>
                <button class="btn btn-primary" id="startOnboardingBtn">
                    <i class="fas fa-bolt"></i>
                    Get Started
                </button>
            </div>
        </div>
        
        <!-- Page Container -->
        <div class="page-container">
            <!-- Home Page -->
            <div class="page home-page active" id="homePage">
                <!-- Welcome Card -->
                <div class="welcome-card">
                    <h1>Welcome, Chef! üë®‚Äçüç≥</h1>
                    <p>Your AI kitchen assistant is ready to help you cook smarter.</p>
                </div>
                
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--primary-gradient);">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="stat-value" id="totalItemsCount">0</div>
                        <div class="stat-label">Total Items</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--success-gradient);">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="stat-value" id="freshItemsCount">0</div>
                        <div class="stat-label">Fresh</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--warning-gradient);">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-value" id="expiringItemsCount">0</div>
                        <div class="stat-label">Expiring</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--danger-gradient);">
                            <i class="fas fa-exclamation"></i>
                        </div>
                        <div class="stat-value" id="expiredItemsCount">0</div>
                        <div class="stat-label">Expired</div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <div class="action-card" data-action="scan">
                        <div class="action-icon" style="background: var(--primary-gradient);">
                            <i class="fas fa-camera"></i>
                        </div>
                        <div class="action-title">Smart Scan</div>
                        <div class="action-subtitle">AI-powered food detection</div>
                    </div>
                    
                    <div class="action-card" data-action="pantry-staples">
                        <div class="action-icon" style="background: var(--secondary-gradient);">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="action-title">Pantry Staples</div>
                        <div class="action-subtitle">Quick add common items</div>
                    </div>
                    
                    <div class="action-card" data-action="recipes">
                        <div class="action-icon" style="background: var(--warning-gradient);">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="action-title">AI Recipes</div>
                        <div class="action-subtitle">Personalized suggestions</div>
                    </div>
                    
                    <div class="action-card" data-action="shopping">
                        <div class="action-icon" style="background: var(--danger-gradient);">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="action-title">Shopping List</div>
                        <div class="action-subtitle">Auto-generated list</div>
                    </div>
                </div>
                
                <!-- Pantry Preview -->
                <div class="section-header">
                    <div class="section-title">Recent Items</div>
                    <a href="#" class="view-all-btn" id="viewAllBtn">View All</a>
                </div>
                
                <div class="pantry-items" id="homePantryItems">
                    <!-- Items loaded dynamically -->
                </div>
            </div>
            
            <!-- Pantry Page -->
            <div class="page pantry-page" id="pantryPage">
                <h1 class="page-title">Pantry</h1>
                
                <div style="display: flex; gap: 10px; margin-bottom: 20px; position: relative;">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" placeholder="Search items..." id="pantrySearch">
                    </div>
                    
                    <button class="add-item-btn" id="addItemBtn">
                        <i class="fas fa-plus"></i>
                    </button>
                    
                    <!-- Add Menu -->
                    <div class="add-menu" id="addMenu">
                        <div class="menu-item" data-action="pantry-staples">
                            <div class="menu-icon" style="background: var(--primary-gradient);">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="menu-text">Pantry Staples</div>
                        </div>
                        <div class="menu-item" data-action="scan">
                            <div class="menu-icon" style="background: var(--warning-gradient);">
                                <i class="fas fa-camera"></i>
                            </div>
                            <div class="menu-text">Scan Item</div>
                        </div>
                        <div class="menu-item" data-action="recipe-photo">
                            <div class="menu-icon" style="background: var(--info-gradient);">
                                <i class="fas fa-camera-alt"></i>
                            </div>
                            <div class="menu-text">Add Recipe Photo</div>
                        </div>
                    </div>
                </div>
                
                <div class="pantry-categories">
                    <div class="category-tab active" data-category="all">All Items</div>
                    <div class="category-tab" data-category="spices">Spices</div>
                    <div class="category-tab" data-category="oils">Oils</div>
                    <div class="category-tab" data-category="baking">Baking</div>
                    <div class="category-tab" data-category="canned">Canned</div>
                    <div class="category-tab" data-category="grains">Grains</div>
                </div>
                
                <div class="pantry-grid" id="pantryGrid">
                    <!-- Items loaded dynamically -->
                </div>
            </div>
            
            <!-- Scanner Page -->
            <div class="page scanner-page" id="scannerPage">
                <div class="scanner-demo">
                    <div class="scanner-preview">
                        <div class="scan-line"></div>
                        <div id="scannedItemEmoji">üçé</div>
                    </div>
                    <div style="font-weight: 600; margin-bottom: 8px;">Scanning Demo</div>
                    <div style="opacity: 0.8; font-size: 0.9rem;">Perfect for fresh groceries and produce</div>
                </div>
                
                <div class="scanner-title">AI Scanner</div>
                <div class="scanner-subtitle">Scan fresh groceries and produce</div>
                <button class="btn btn-primary" id="startScanBtn" style="max-width: 200px; margin: 0 auto;">
                    <i class="fas fa-camera"></i>
                    Start Demo Scan
                </button>
                
                <div class="scanner-options">
                    <button class="btn btn-secondary" id="uploadPhotoBtn" style="margin-top: 20px;">
                        <i class="fas fa-upload"></i>
                        Upload Photo Instead
                    </button>
                </div>
            </div>
            
            <!-- Recipes Page -->
            <div class="page recipes-page" id="recipesPage">
                <div class="recipes-tabs">
                    <div class="recipes-tab active" data-tab="ai-recipes">AI Recipes</div>
                    <div class="recipes-tab" data-tab="my-recipes">My Recipes</div>
                    <div class="recipes-tab" data-tab="favorites">Favorites</div>
                </div>
                
                <div class="recipes-tab-content active" id="aiRecipesTab">
                    <div class="section-header">
                        <div class="section-title">AI Recipes</div>
                        <div class="section-subtitle">Personalized recipes based on your pantry</div>
                    </div>
                    
                    <div class="recipes-grid" id="recipesGrid">
                        <!-- Recipes loaded dynamically -->
                    </div>
                </div>
                
                <div class="recipes-tab-content" id="myRecipesTab">
                    <div class="section-header">
                        <div class="section-title">My Recipes</div>
                        <button class="btn btn-primary" id="addRecipePhotoBtn" style="padding: 8px 16px;">
                            <i class="fas fa-camera-alt"></i>
                            Add Recipe Photo
                        </button>
                    </div>
                    
                    <div class="recipes-grid" id="myRecipesGrid">
                        <!-- User recipes loaded dynamically -->
                    </div>
                </div>
                
                <div class="recipes-tab-content" id="favoritesTab">
                    <div class="section-header">
                        <div class="section-title">Favorites</div>
                    </div>
                    
                    <div class="recipes-grid" id="favoritesGrid">
                        <!-- Favorites loaded dynamically -->
                    </div>
                </div>
            </div>
            
            <!-- Shopping List Page -->
            <div class="page shopping-page" id="shoppingPage">
                <div class="shopping-header">
                    <div class="section-title">Shopping List</div>
                    <div class="shopping-actions">
                        <button class="btn btn-secondary" id="findCouponsBtn">
                            <i class="fas fa-tag"></i>
                            Find Coupons
                        </button>
                        <button class="btn btn-secondary" id="clearShoppingBtn">
                            <i class="fas fa-trash"></i>
                            Clear All
                        </button>
                    </div>
                </div>
                
                <div class="shopping-summary">
                    <div class="summary-card">
                        <div class="summary-value" id="totalItems">0</div>
                        <div class="summary-label">Items</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="estimatedCost">$0.00</div>
                        <div class="summary-label">Est. Cost</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="estimatedSavings">$0.00</div>
                        <div class="summary-label">Est. Savings</div>
                    </div>
                </div>
                
                <!-- Coupons Section -->
                <div class="coupons-section" id="couponsSection" style="display: none;">
                    <div class="section-header">
                        <div class="section-title">
                            <i class="fas fa-tag"></i>
                            Available Coupons
                        </div>
                    </div>
                    <div class="coupons-grid" id="couponsGrid">
                        <!-- Coupons loaded dynamically -->
                    </div>
                </div>
                
                <div class="shopping-list" id="shoppingList">
                    <!-- Shopping items loaded dynamically -->
                </div>
                
                <div class="shopping-actions-footer">
                    <button class="btn btn-primary" id="generateShoppingBtn">
                        <i class="fas fa-magic"></i>
                        Generate from Missing Items
                    </button>
                </div>
            </div>
            
            <!-- Meal Planner Page -->
            <div class="page meal-planner-page" id="mealPlannerPage">
                <div class="section-header">
                    <div class="section-title">Weekly Meal Planner</div>
                    <button class="btn btn-primary" id="generateMealPlanBtn">
                        <i class="fas fa-calendar-alt"></i>
                        Generate Plan
                    </button>
                </div>
                
                <div class="week-calendar" id="weekCalendar">
                    <!-- Days loaded dynamically -->
                </div>
                
                <div class="prep-tips" id="prepTips">
                    <div class="section-header">
                        <div class="section-title">
                            <i class="fas fa-lightbulb"></i>
                            Prep Tips for Today
                        </div>
                    </div>
                    <div class="tips-content" id="tipsContent">
                        <p>No meal plan generated yet. Click "Generate Plan" to get started!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tab Bar -->
        <nav class="tab-bar">
            <a href="#" class="tab-item active" data-page="home">
                <div class="tab-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="tab-label">Home</div>
            </a>
            
            <a href="#" class="tab-item" data-page="pantry">
                <div class="tab-icon">
                    <i class="fas fa-box"></i>
                </div>
                <div class="tab-label">Pantry</div>
            </a>
            
            <a href="#" class="tab-item" data-page="scanner">
                <div class="tab-icon">
                    <i class="fas fa-camera"></i>
                </div>
                <div class="tab-label">Scan</div>
            </a>
            
            <a href="#" class="tab-item" data-page="recipes">
                <div class="tab-icon">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="tab-label">Recipes</div>
            </a>
            
            <a href="#" class="tab-item" data-page="meal-planner">
                <div class="tab-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="tab-label">Plan</div>
            </a>
        </nav>
        
        <!-- Safe Area Bottom -->
        <div class="safe-area-bottom"></div>
    </div>
    
    <!-- Backdrop for Modals -->
    <div class="backdrop" id="backdrop"></div>
    
    <!-- Pantry Staples Modal -->
    <div class="pantry-staples-modal" id="pantryStaplesModal">
        <div class="modal-header">
            <div class="modal-handle"></div>
            <div class="modal-title">Quick Add Pantry Staples</div>
            <button class="modal-close" id="closeStaplesModalBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-content">
            <p class="modal-subtitle">Select the staples you already have in your kitchen:</p>
            <div class="staples-grid" id="staplesGrid">
                <!-- Pantry staples loaded dynamically -->
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary" id="skipStaplesBtn" style="margin-right: 10px;">
                Skip for Now
            </button>
            <button class="btn btn-primary" id="saveStaplesBtn">
                <i class="fas fa-check"></i>
                Add Selected to Pantry
            </button>
        </div>
    </div>
    
    <!-- Recipe Details Modal -->
    <div class="recipe-modal" id="recipeModal">
        <div class="modal-header">
            <div class="modal-handle"></div>
            <button class="modal-close" id="closeRecipeModalBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="recipe-modal-content" id="recipeModalContent">
            <!-- Recipe content loaded dynamically -->
        </div>
    </div>
    
    <!-- Recipe Photo Modal -->
    <div class="recipe-photo-modal" id="recipePhotoModal">
        <div class="modal-header">
            <div class="modal-handle"></div>
            <div class="modal-title">Add Recipe from Photo</div>
            <button class="modal-close" id="closeRecipePhotoModalBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-content">
            <div class="photo-upload-area" id="photoUploadArea">
                <div class="upload-icon">
                    <i class="fas fa-camera-alt"></i>
                </div>
                <div class="upload-text">Upload a photo of your recipe</div>
                <input type="file" id="recipePhotoInput" accept="image/*" capture style="display: none;">
                <button class="btn btn-secondary" id="uploadPhotoTrigger">
                    <i class="fas fa-upload"></i>
                    Choose Photo
                </button>
                <div class="upload-hint">Or take a new photo</div>
            </div>
            
            <div class="photo-preview" id="photoPreview" style="display: none;">
                <img id="recipePhotoPreview" src="" alt="Recipe photo">
                <div class="photo-actions">
                    <button class="btn btn-secondary" id="retakePhotoBtn">
                        <i class="fas fa-redo"></i>
                        Retake
                    </button>
                    <button class="btn btn-primary" id="processRecipePhotoBtn">
                        <i class="fas fa-magic"></i>
                        Digitize Recipe
                    </button>
                </div>
            </div>
            
            <div class="digitizing-loader" id="digitizingLoader" style="display: none;">
                <div class="loader-spinner"></div>
                <div class="loader-text">AI is digitizing your recipe...</div>
            </div>
            
            <div class="recipe-preview" id="recipePreview" style="display: none;">
                <!-- Digitized recipe preview -->
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <div class="notification-icon"></div>
            <div class="notification-text"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
